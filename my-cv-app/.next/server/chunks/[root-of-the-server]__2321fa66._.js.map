{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/charlespelong/Desktop/finance-type/my-cv-app/pages/api/cv/list.ts"],"sourcesContent":["import type { NextApiHandler } from 'next'\nimport { createPagesServerClient } from '@supabase/auth-helpers-nextjs'\n\nconst handler: NextApiHandler = async (req, res) => {\n  if (req.method !== 'GET') {\n    res.setHeader('Allow', ['GET'])\n    return res.status(405).json({ error: 'Méthode non autorisée' })\n  }\n\n  const supabase = createPagesServerClient({ req, res })\n  const {\n    data: { session },\n  } = await supabase.auth.getSession()\n\n  if (!session?.user) {\n    return res.status(401).json({ error: 'Authentification requise.' })\n  }\n\n  const { data, error } = await supabase\n    .from('user_cvs')\n    .select('id, title, updated_at, created_at')\n    .eq('user_id', session.user.id)\n    .order('updated_at', { ascending: false })\n\n  if (error) {\n    return res.status(500).json({ error: error.message })\n  }\n\n  return res.status(200).json({ cvs: data ?? [] })\n}\n\nexport default handler\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,UAA0B,OAAO,KAAK;IAC1C,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,IAAI,SAAS,CAAC,SAAS;YAAC;SAAM;QAC9B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAwB;IAC/D;IAEA,MAAM,WAAW,IAAA,kMAAuB,EAAC;QAAE;QAAK;IAAI;IACpD,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,IAAI,CAAC,SAAS,MAAM;QAClB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA4B;IACnE;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,qCACP,EAAE,CAAC,WAAW,QAAQ,IAAI,CAAC,EAAE,EAC7B,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE1C,IAAI,OAAO;QACT,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC;IACrD;IAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,KAAK,QAAQ,EAAE;IAAC;AAChD;uCAEe","debugId":null}}]
}