{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/charlespelong/Desktop/finance-type/my-cv-app/pages/api/cv/detail.ts"],"sourcesContent":["import type { NextApiHandler } from 'next'\nimport { createPagesServerClient } from '@supabase/auth-helpers-nextjs'\n\nconst handler: NextApiHandler = async (req, res) => {\n  if (req.method !== 'GET') {\n    res.setHeader('Allow', ['GET'])\n    return res.status(405).json({ error: 'Méthode non autorisée' })\n  }\n\n  const supabase = createPagesServerClient({ req, res })\n  const {\n    data: { session },\n  } = await supabase.auth.getSession()\n\n  if (!session?.user) {\n    return res.status(401).json({ error: 'Authentification requise.' })\n  }\n\n  const idParam = req.query.id\n  const id = typeof idParam === 'string' ? idParam : Array.isArray(idParam) ? idParam[0] : undefined\n\n  if (!id) {\n    return res.status(400).json({ error: 'Identifiant du CV manquant.' })\n  }\n\n  const { data, error } = await supabase\n    .from('user_cvs')\n    .select('id, title, blocks, font_scale, created_at, updated_at')\n    .eq('user_id', session.user.id)\n    .eq('id', id)\n    .maybeSingle()\n\n  if (error) {\n    return res.status(500).json({ error: error.message })\n  }\n\n  if (!data) {\n    return res.status(404).json({ error: 'CV introuvable.' })\n  }\n\n  return res.status(200).json({ cv: data })\n}\n\nexport default handler\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,UAA0B,OAAO,KAAK;IAC1C,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,IAAI,SAAS,CAAC,SAAS;YAAC;SAAM;QAC9B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAwB;IAC/D;IAEA,MAAM,WAAW,IAAA,kMAAuB,EAAC;QAAE;QAAK;IAAI;IACpD,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,IAAI,CAAC,SAAS,MAAM;QAClB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA4B;IACnE;IAEA,MAAM,UAAU,IAAI,KAAK,CAAC,EAAE;IAC5B,MAAM,KAAK,OAAO,YAAY,WAAW,UAAU,MAAM,OAAO,CAAC,WAAW,OAAO,CAAC,EAAE,GAAG;IAEzF,IAAI,CAAC,IAAI;QACP,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA8B;IACrE;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,yDACP,EAAE,CAAC,WAAW,QAAQ,IAAI,CAAC,EAAE,EAC7B,EAAE,CAAC,MAAM,IACT,WAAW;IAEd,IAAI,OAAO;QACT,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC;IACrD;IAEA,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAkB;IACzD;IAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,IAAI;IAAK;AACzC;uCAEe","debugId":null}}]
}