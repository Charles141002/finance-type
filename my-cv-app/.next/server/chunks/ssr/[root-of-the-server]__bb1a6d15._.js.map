{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/halca/finance-type/my-cv-app/components/BlockEditor.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { DragDropContext, Droppable, Draggable, DropResult } from \"@hello-pangea/dnd\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { Block, BlockType, DragContext, canMoveBlock, findBlockById, getAllChildBlocks } from \"../utils/types\";\r\n\r\ninterface Props {\r\n  blocks: Block[];\r\n  setBlocks: (blocks: Block[]) => void;\r\n}\r\n\r\nconst BlockEditor = ({ blocks, setBlocks }: Props) => {\r\n  const [newBlockType, setNewBlockType] = useState<BlockType>(\"text\");\r\n  const [subBlockTypes, setSubBlockTypes] = useState<Record<string, BlockType>>({});\r\n\r\n  // -------------------\r\n  // Ajouter un bloc\r\n  // -------------------\r\n  const handleAddBlock = (parentId?: string) => {\r\n    const typeToUse = parentId ? (subBlockTypes[parentId] || \"text\") : newBlockType;\r\n    const newBlock: Block = {\r\n      id: uuid(),\r\n      type: typeToUse,\r\n      content:\r\n        typeToUse === \"contact\"\r\n          ? { email: \"\", phone: \"\", address: \"\", linkedin: \"\" }\r\n          : \"\",\r\n      children: [],\r\n    };\r\n\r\n    if (!parentId) {\r\n      setBlocks([...blocks, newBlock]);\r\n    } else {\r\n      setBlocks(addChildRecursive(blocks, parentId, newBlock));\r\n    }\r\n  };\r\n\r\n  const addChildRecursive = (blocks: Block[], parentId: string, child: Block): Block[] =>\r\n    blocks.map((b) =>\r\n      b.id === parentId\r\n        ? { ...b, children: [...(b.children || []), child] }\r\n        : { ...b, children: b.children ? addChildRecursive(b.children, parentId, child) : [] }\r\n    );\r\n\r\n  // -------------------\r\n  // Supprimer un bloc\r\n  // -------------------\r\n  const deleteBlockRecursive = (blocks: Block[], id: string): Block[] =>\r\n    blocks\r\n      .filter((b) => b.id !== id)\r\n      .map((b) => ({\r\n        ...b,\r\n        children: b.children ? deleteBlockRecursive(b.children, id) : [],\r\n      }));\r\n\r\n  const handleDeleteBlock = (id: string) => setBlocks(deleteBlockRecursive(blocks, id));\r\n\r\n  // -------------------\r\n  // Mise à jour du contenu\r\n  // -------------------\r\n  const updateBlockContentRecursive = (blocks: Block[], id: string, content: any): Block[] =>\r\n    blocks.map((b) =>\r\n      b.id === id\r\n        ? { ...b, content }\r\n        : { ...b, children: b.children ? updateBlockContentRecursive(b.children, id, content) : [] }\r\n    );\r\n\r\n  const updateBlockContent = (id: string, content: any) => {\r\n    setBlocks(updateBlockContentRecursive(blocks, id, content));\r\n  };\r\n\r\n  // -------------------\r\n  // Drag & Drop racine\r\n  // -------------------\r\n  const handleDragEnd = (result: any) => {\r\n    if (!result.destination) return;\r\n    const reordered = Array.from(blocks);\r\n    const [moved] = reordered.splice(result.source.index, 1);\r\n    reordered.splice(result.destination.index, 0, moved);\r\n    setBlocks(reordered);\r\n  };\r\n\r\n  // -------------------\r\n  // Rendu récursif d'un bloc\r\n  // -------------------\r\n  const renderBlock = (block: Block) => (\r\n    <>\r\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n        <strong>{block.type.toUpperCase()}</strong>\r\n        <div>\r\n          {block.type !== \"divider\" && block.type !== \"header\" && block.type !== \"contact\" && (\r\n            <>\r\n              <select\r\n                value={subBlockTypes[block.id] || \"text\"}\r\n                onChange={(e) =>\r\n                  setSubBlockTypes({\r\n                    ...subBlockTypes,\r\n                    [block.id]: e.target.value as BlockType,\r\n                  })\r\n                }\r\n                style={{ marginRight: 8 }}\r\n              >\r\n                <option value=\"header\">Header</option>\r\n                <option value=\"subsection\">Sous-section</option>\r\n                <option value=\"section\">Section</option>\r\n                <option value=\"text\">Texte</option>\r\n                <option value=\"contact\">Contact</option>\r\n                <option value=\"divider\">Séparateur</option>\r\n              </select>\r\n              <button onClick={() => handleAddBlock(block.id)} style={{ marginRight: 8 }}>\r\n                + sous-bloc\r\n              </button>\r\n            </>\r\n          )}\r\n          <button onClick={() => handleDeleteBlock(block.id)} style={{ color: \"red\" }}>\r\n            ✕\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 8 }}>\r\n        {block.type === \"divider\" ? (\r\n          <hr />\r\n        ) : block.type === \"contact\" ? (\r\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: 4 }}>\r\n            <input\r\n              placeholder=\"Email\"\r\n              value={block.content.email}\r\n              onChange={(e) => updateBlockContent(block.id, { ...block.content, email: e.target.value })}\r\n            />\r\n            <input\r\n              placeholder=\"Téléphone\"\r\n              value={block.content.phone}\r\n              onChange={(e) => updateBlockContent(block.id, { ...block.content, phone: e.target.value })}\r\n            />\r\n            <input\r\n              placeholder=\"Adresse\"\r\n              value={block.content.address}\r\n              onChange={(e) => updateBlockContent(block.id, { ...block.content, address: e.target.value })}\r\n            />\r\n            <input\r\n              placeholder=\"LinkedIn\"\r\n              value={block.content.linkedin}\r\n              onChange={(e) => updateBlockContent(block.id, { ...block.content, linkedin: e.target.value })}\r\n            />\r\n          </div>\r\n        ) : block.type === \"subsection\" ? (\r\n          <div style={{ display: \"flex\", flexDirection: \"column\", gap: 4 }}>\r\n            <input\r\n              placeholder=\"Titre (ex: JCDecaux)\"\r\n              value={block.content?.title || \"\"}\r\n              onChange={(e) => updateBlockContent(block.id, { ...block.content, title: e.target.value })}\r\n            />\r\n            <input\r\n              placeholder=\"Sous-titre (ex: Data Scientist)\"\r\n              value={block.content?.subtitle || \"\"}\r\n              onChange={(e) => updateBlockContent(block.id, { ...block.content, subtitle: e.target.value })}\r\n            />\r\n            <input\r\n              placeholder=\"Période (ex: 11/2024 -- 05/2025)\"\r\n              value={block.content?.period || \"\"}\r\n              onChange={(e) => updateBlockContent(block.id, { ...block.content, period: e.target.value })}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <textarea\r\n            value={typeof block.content === \"string\" ? block.content : block.content?.title || \"\"}\r\n            onChange={(e) => {\r\n              let newContent = e.target.value;\r\n              if (block.type === \"header\" || block.type === \"section\") {\r\n                newContent = { ...block.content, title: e.target.value };\r\n              }\r\n              updateBlockContent(block.id, newContent);\r\n            }}\r\n            rows={3}\r\n            style={{ width: \"100%\" }}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {block.children && block.children.length > 0 && (\r\n        <div style={{ marginLeft: 12, marginTop: 8, borderLeft: \"2px solid #eee\", paddingLeft: 8 }}>\r\n          {block.children.map((child) => renderBlock(child))}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n\r\n  // -------------------\r\n  // Rendu principal\r\n  // -------------------\r\n  return (\r\n    <div>\r\n      <div style={{ marginBottom: 16 }}>\r\n        <select value={newBlockType} onChange={(e) => setNewBlockType(e.target.value as BlockType)}>\r\n          <option value=\"header\">Header</option>\r\n          <option value=\"subsection\">Sous-section</option>\r\n          <option value=\"section\">Section</option>\r\n          <option value=\"text\">Texte</option>\r\n          <option value=\"contact\">Contact</option>\r\n          <option value=\"divider\">Séparateur</option>\r\n        </select>\r\n        <button onClick={() => handleAddBlock()} style={{ marginLeft: 8 }}>\r\n          Ajouter bloc\r\n        </button>\r\n      </div>\r\n\r\n      <DragDropContext onDragEnd={handleDragEnd}>\r\n        <Droppable droppableId=\"blocks\">\r\n          {(provided) => (\r\n            <div ref={provided.innerRef} {...provided.droppableProps}>\r\n              {blocks.map((block, index) => (\r\n                <Draggable key={block.id} draggableId={block.id} index={index}>\r\n                  {(provided) => (\r\n                    <div\r\n                      ref={provided.innerRef}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                      style={{\r\n                        padding: 8,\r\n                        border: \"1px solid #ddd\",\r\n                        marginBottom: 8,\r\n                        borderRadius: 8,\r\n                        background: \"#fff\",\r\n                        ...provided.draggableProps.style,\r\n                      }}\r\n                    >\r\n                      {renderBlock(block)}\r\n                    </div>\r\n                  )}\r\n                </Draggable>\r\n              ))}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlockEditor;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/halca/finance-type/my-cv-app/utils/blocksToHTML.ts"],"sourcesContent":["import { Block } from \"./types\";\r\n\r\nexport default function blocksToHTML(blocks: Block[], fontScale: number = 1): string {\r\n    return blocks.map(block => {\r\n      switch (block.type) {\r\n        case \"header\": {\r\n          const text = block.content?.title || \"\";\r\n          return `<div style=\"text-align:center; margin-bottom:${8 * fontScale}px;\">\r\n            <h1 style=\"font-size:${18 * fontScale}pt; font-weight:bold; margin:0; padding:0;\">${text}</h1>\r\n          </div>`;\r\n        }\r\n  \r\n        case \"contact\": {\r\n          const c = block.content || {};\r\n          return `<div style=\"text-align:center; margin-bottom:${8 * fontScale}px; font-size:${10 * fontScale}pt;\">\r\n            ${c.email || \"\"} • ${c.phone || \"\"} • ${c.address || \"\"} • ${c.linkedin || \"\"}\r\n          </div>`;\r\n        }\r\n  \r\n        case \"text\": {\r\n          const content = block.content || \"\";\r\n          const isItalic = content.includes(\"Étudiant à IMT Atlantique\");\r\n          const isBullet = content.startsWith(\"•\");\r\n          const hasChildren = block.children && block.children.length > 0;\r\n          \r\n          if (isBullet) {\r\n            return `<div style=\"margin-left:${16 * fontScale}px; margin-bottom:${2 * fontScale}px; font-size:${10 * fontScale}pt;\">\r\n              ${content}\r\n            </div>${blocksToHTML(block.children || [], fontScale)}`;\r\n          } else if (isItalic) {\r\n            return `<div style=\"text-align:center; margin-bottom:${8 * fontScale}px; font-style:italic; font-size:${10 * fontScale}pt;\">\r\n              ${content}\r\n            </div>${blocksToHTML(block.children || [], fontScale)}`;\r\n          } else {\r\n            return `<div style=\"margin-left:${hasChildren ? 16 * fontScale : 0}px; margin-bottom:${2 * fontScale}px; font-size:${10 * fontScale}pt;\">\r\n              ${content}\r\n            </div>${blocksToHTML(block.children || [], fontScale)}`;\r\n          }\r\n        }\r\n  \r\n        case \"divider\":\r\n          return `<hr style=\"border:0; border-top:1px solid #000; margin:${8 * fontScale}px 0;\"/>`;\r\n  \r\n        case \"section\":\r\n          return `<div style=\"margin-top:${8 * fontScale}px;\">\r\n            <h2 style=\"font-size:${12 * fontScale}pt; font-weight:bold; text-transform:uppercase; margin:0 0 ${4 * fontScale}px 0;\">${block.content?.title || \"\"}</h2>\r\n            ${blocksToHTML(block.children || [], fontScale)}\r\n          </div>`;\r\n  \r\n        case \"subsection\":\r\n          return `<div style=\"margin-bottom:${4 * fontScale}px;\">\r\n            <div style=\"display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:${2 * fontScale}px;\">\r\n              <div>\r\n                <div style=\"font-weight:bold; font-size:${10 * fontScale}pt;\">${block.content?.title || \"\"}</div>\r\n                ${block.content?.subtitle ? `<div style=\"font-size:${10 * fontScale}pt; margin-top:${1 * fontScale}px;\">${block.content.subtitle}</div>` : \"\"}\r\n              </div>\r\n              <div style=\"font-style:italic; font-size:${10 * fontScale}pt;\">${block.content?.period || \"\"}</div>\r\n            </div>\r\n            ${blocksToHTML(block.children || [], fontScale)}\r\n          </div>`;\r\n  \r\n        default:\r\n          return \"\";\r\n      }\r\n    }).join(\"\");\r\n  }\r\n  "],"names":[],"mappings":";;;;AAEe,SAAS,aAAa,MAAe,EAAE,YAAoB,CAAC;IACvE,OAAO,OAAO,GAAG,CAAC,CAAA;QAChB,OAAQ,MAAM,IAAI;YAChB,KAAK;gBAAU;oBACb,MAAM,OAAO,MAAM,OAAO,EAAE,SAAS;oBACrC,OAAO,CAAC,6CAA6C,EAAE,IAAI,UAAU;iCAC9C,EAAE,KAAK,UAAU,4CAA4C,EAAE,KAAK;gBACrF,CAAC;gBACT;YAEA,KAAK;gBAAW;oBACd,MAAM,IAAI,MAAM,OAAO,IAAI,CAAC;oBAC5B,OAAO,CAAC,6CAA6C,EAAE,IAAI,UAAU,cAAc,EAAE,KAAK,UAAU;YAClG,EAAE,EAAE,KAAK,IAAI,GAAG,GAAG,EAAE,EAAE,KAAK,IAAI,GAAG,GAAG,EAAE,EAAE,OAAO,IAAI,GAAG,GAAG,EAAE,EAAE,QAAQ,IAAI,GAAG;gBAC1E,CAAC;gBACT;YAEA,KAAK;gBAAQ;oBACX,MAAM,UAAU,MAAM,OAAO,IAAI;oBACjC,MAAM,WAAW,QAAQ,QAAQ,CAAC;oBAClC,MAAM,WAAW,QAAQ,UAAU,CAAC;oBACpC,MAAM,cAAc,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,MAAM,GAAG;oBAE9D,IAAI,UAAU;wBACZ,OAAO,CAAC,wBAAwB,EAAE,KAAK,UAAU,kBAAkB,EAAE,IAAI,UAAU,cAAc,EAAE,KAAK,UAAU;cAChH,EAAE,QAAQ;kBACN,EAAE,aAAa,MAAM,QAAQ,IAAI,EAAE,EAAE,YAAY;oBACzD,OAAO,IAAI,UAAU;wBACnB,OAAO,CAAC,6CAA6C,EAAE,IAAI,UAAU,iCAAiC,EAAE,KAAK,UAAU;cACrH,EAAE,QAAQ;kBACN,EAAE,aAAa,MAAM,QAAQ,IAAI,EAAE,EAAE,YAAY;oBACzD,OAAO;wBACL,OAAO,CAAC,wBAAwB,EAAE,cAAc,KAAK,YAAY,EAAE,kBAAkB,EAAE,IAAI,UAAU,cAAc,EAAE,KAAK,UAAU;cAClI,EAAE,QAAQ;kBACN,EAAE,aAAa,MAAM,QAAQ,IAAI,EAAE,EAAE,YAAY;oBACzD;gBACF;YAEA,KAAK;gBACH,OAAO,CAAC,uDAAuD,EAAE,IAAI,UAAU,QAAQ,CAAC;YAE1F,KAAK;gBACH,OAAO,CAAC,uBAAuB,EAAE,IAAI,UAAU;iCACxB,EAAE,KAAK,UAAU,2DAA2D,EAAE,IAAI,UAAU,OAAO,EAAE,MAAM,OAAO,EAAE,SAAS,GAAG;YACrJ,EAAE,aAAa,MAAM,QAAQ,IAAI,EAAE,EAAE,WAAW;gBAC5C,CAAC;YAET,KAAK;gBACH,OAAO,CAAC,0BAA0B,EAAE,IAAI,UAAU;2GAC+C,EAAE,IAAI,UAAU;;wDAEnE,EAAE,KAAK,UAAU,KAAK,EAAE,MAAM,OAAO,EAAE,SAAS,GAAG;gBAC3F,EAAE,MAAM,OAAO,EAAE,WAAW,CAAC,sBAAsB,EAAE,KAAK,UAAU,eAAe,EAAE,IAAI,UAAU,KAAK,EAAE,MAAM,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,GAAG;;uDAEvG,EAAE,KAAK,UAAU,KAAK,EAAE,MAAM,OAAO,EAAE,UAAU,GAAG;;YAE/F,EAAE,aAAa,MAAM,QAAQ,IAAI,EAAE,EAAE,WAAW;gBAC5C,CAAC;YAET;gBACE,OAAO;QACX;IACF,GAAG,IAAI,CAAC;AACV","debugId":null}},
    {"offset": {"line": 613, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/halca/finance-type/my-cv-app/data/initialCV.tsx"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\r\nimport { Block } from \"./types\";\r\n\r\nexport const initialBlocks: Block[] = [\r\n  {\r\n    id: uuidv4(),\r\n    type: \"header\",\r\n    content: { title: \"Charles Pelong\" },\r\n    style: { size: \"large\", align: \"center\" },\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"contact\",\r\n    content: {\r\n      email: \"charlespelong@gmail.com\",\r\n      phone: \"+33 7 83 28 54 92\",\r\n      address: \"31 Avenue de Verdun, 78290 Croissy-sur-Seine\",\r\n      linkedin: \"https://fr.linkedin.com/in/charles-pelong-a68212246\",\r\n    },\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"text\",\r\n    content: \"Étudiant à IMT Atlantique à la recherche d'un stage de fin d'études à partir du 04/2026 dans le domaine de la science des données et de l'apprentissage automatique.\",\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"divider\"\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"section\",\r\n    content: { title: \"FORMATIONS\" },\r\n    children: [\r\n      {\r\n        id: uuidv4(),\r\n        type: \"subsection\",\r\n        content: {\r\n          title: \"IMT Atlantique\",\r\n          subtitle: \"Master : Data Science et Recherche Opérationnelle\",\r\n          period: \"09/2022 -- 06/2025\",\r\n        },\r\n        children: [\r\n          { id: uuidv4(), type: \"text\", content: \"#3 école d'ingénieurs française, d'après le Classement de l'Etudiant 2025\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Cours : Mathématiques appliquées, Statistiques, Probabilités, Machine Learning, Optimisation, Recherche opérationnelle, IA, Python, Java, Anglais\" },\r\n        ],\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        type: \"subsection\",\r\n        content: {\r\n          title: \"Shanghai Jiao Tong University\",\r\n          subtitle: \"Master en Informatique et Recherche Opérationnelle\",\r\n          period: \"09/2022 -- 06/2025\",\r\n        },\r\n        children: [\r\n          { id: uuidv4(), type: \"text\", content: \"#9 université mondiale en Computer Science, d'après le Classement de Shanghai 2025\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Cours : Deep Learning, Computer Vision, Machine Learning, Cloud Computing, Chinois\" },\r\n        ],\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        type: \"subsection\",\r\n        content: {\r\n          title: \"Lycée Pasteur\",\r\n          subtitle: \"Classes préparatoires scientifiques PCSI/PC (CPGE)\",\r\n          period: \"09/2020 -- 07/2022\",\r\n        },\r\n        children: [\r\n          { id: uuidv4(), type: \"text\", content: \"Formation intensive en Mathématiques, Physique, Chimie, Informatique, Français, Anglais\" },\r\n        ],\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"divider\"\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"section\",\r\n    content: { title: \"EXPERIENCES PROFESSIONNELLES\" },\r\n    children: [\r\n      {\r\n        id: uuidv4(),\r\n        type: \"subsection\",\r\n        content: {\r\n          title: \"JCDecaux\",\r\n          subtitle: \"Data Scientist\",\r\n          period: \"11/2024 -- 05/2025\",\r\n        },\r\n        children: [\r\n          { id: uuidv4(), type: \"text\", content: \"Stage de 6 mois au sein de la DataCorp, entité de JCDecaux développant des produits data\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Développement de solutions RAG (Retrieval-Augmented Generation) as-a-service (Python, AWS, Langchain). Création de copilotes IA à destination :\" },\r\n          { id: uuidv4(), type: \"text\", content: \"• des commerciaux pour un accès rapide à des données ciblées et fiables du groupe pour l'élaboration de devis.\" },\r\n          { id: uuidv4(), type: \"text\", content: \"• de la direction financière permettant la création de tableaux de bord à partir du langage naturel basés sur les données du groupe.\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Ces produits permettent de réduire drastiquement le temps de recherche et les frottements entre différentes entités du groupe.\" },\r\n        ],\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        type: \"subsection\",\r\n        content: {\r\n          title: \"Sopra Steria Next\",\r\n          subtitle: \"Data Analyst / Data Engineer\",\r\n          period: \"04/2024 -- 10/2024\",\r\n        },\r\n        children: [\r\n          { id: uuidv4(), type: \"text\", content: \"Stage de 6 mois, mission de conseil orientée data pour le compte du Ministère de l'Intérieur\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Collecte et traitement de données incluant du web scraping et extraction depuis diverses sources (Python, Selenium).\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Création de pipelines de données pour automatiser l'intégration et le nettoyage (Python, Pandas, M/Power BI).\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Production de tableaux de bord et rapports automatisés pour suivre les indicateurs de performance (Power BI, Python).\" },\r\n        ],\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"divider\"\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"section\",\r\n    content: { title: \"AUTRES EXPERIENCES\" },\r\n    children: [\r\n      {\r\n        id: uuidv4(),\r\n        type: \"subsection\",\r\n        content: {\r\n          title: \"Junior Atlantique – Timber Productions\",\r\n          subtitle: \"Développeur logiciel\",\r\n          period: \"05/2023 -- 10/2023\",\r\n        },\r\n        children: [\r\n          { id: uuidv4(), type: \"text\", content: \"Développement complet d'une application de gestion et recherche de contacts clients (JavaScript).\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Vente de l'application pour 3 000€.\" },\r\n        ],\r\n      },\r\n      {\r\n        id: uuidv4(),\r\n        type: \"subsection\",\r\n        content: {\r\n          title: \"Reeverse Systems\",\r\n          subtitle: \"Chef de projet\",\r\n          period: \"09/2023 -- 01/2024\",\r\n        },\r\n        children: [\r\n          { id: uuidv4(), type: \"text\", content: \"Projet académique de 4 mois avec Reeverse Systems, élaboration d'un simulateur pour démontrer l'efficacité de leur solution : réduction des déchets industriels et maximisation des rendements.\" },\r\n          { id: uuidv4(), type: \"text\", content: \"Conception d'un simulateur multi-objectifs pour la production industrielle (Python, Matplotlib) :\" },\r\n          { id: uuidv4(), type: \"text\", content: \"• Génération de données aléatoires suivant différentes lois pour simuler plusieurs facteurs (nombre d'ouvriers, poids des déchets, etc.).\" },\r\n          { id: uuidv4(), type: \"text\", content: \"• Création de fronts de Pareto et visualisation sous forme de graphes radar (Python, Matplotlib).\" },\r\n          { id: uuidv4(), type: \"text\", content: \"• Clustering K-means sur le front de Pareto pour ne présenter que 5 solutions représentatives.\" },\r\n        ],\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"divider\"\r\n  },\r\n  {\r\n    id: uuidv4(),\r\n    type: \"section\",\r\n    content: { title: \"COMPETENCES, LANGUES ET ACTIVITES\" },\r\n    children: [\r\n      { id: uuidv4(), type: \"text\", content: \"Langues : Français (natif), Anglais (IELTS 7/9), Espagnol (A2), Allemand (A2)\" },\r\n      { id: uuidv4(), type: \"text\", content: \"Programmation : Python (Pandas, Scikit-learn), SQL, GitHub, Java, JavaScript, M/Power BI\" },\r\n      { id: uuidv4(), type: \"text\", content: \"Machine Learning : Kaggle competitions (stacking LGBM+CatBoost sur les prix de voitures d'occasion), étude de cas Roland Berger (cliniques dentaires)\" },\r\n      { id: uuidv4(), type: \"text\", content: \"Sports : Judo, Rugby (capitaine et responsable de l'équipe de l'école)\" },\r\n      { id: uuidv4(), type: \"text\", content: \"Bénévolat : Scouts (10 ans) + mission humanitaire (1 mois)\" },\r\n    ],\r\n  },\r\n];\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAGO,MAAM,gBAAyB;IACpC;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;QACN,SAAS;YAAE,OAAO;QAAiB;QACnC,OAAO;YAAE,MAAM;YAAS,OAAO;QAAS;IAC1C;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;QACN,SAAS;YACP,OAAO;YACP,OAAO;YACP,SAAS;YACT,UAAU;QACZ;IACF;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;QACN,SAAS;IACX;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;IACR;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;QACN,SAAS;YAAE,OAAO;QAAa;QAC/B,UAAU;YACR;gBACE,IAAI,IAAA,8GAAM;gBACV,MAAM;gBACN,SAAS;oBACP,OAAO;oBACP,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAA4E;oBACnH;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAoJ;iBAC5L;YACH;YACA;gBACE,IAAI,IAAA,8GAAM;gBACV,MAAM;gBACN,SAAS;oBACP,OAAO;oBACP,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAqF;oBAC5H;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAqF;iBAC7H;YACH;YACA;gBACE,IAAI,IAAA,8GAAM;gBACV,MAAM;gBACN,SAAS;oBACP,OAAO;oBACP,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAA0F;iBAClI;YACH;SACD;IACH;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;IACR;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;QACN,SAAS;YAAE,OAAO;QAA+B;QACjD,UAAU;YACR;gBACE,IAAI,IAAA,8GAAM;gBACV,MAAM;gBACN,SAAS;oBACP,OAAO;oBACP,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAA2F;oBAClI;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAkJ;oBACzL;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAiH;oBACxJ;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAuI;oBAC9K;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAiI;iBACzK;YACH;YACA;gBACE,IAAI,IAAA,8GAAM;gBACV,MAAM;gBACN,SAAS;oBACP,OAAO;oBACP,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAA+F;oBACtI;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAuH;oBAC9J;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAgH;oBACvJ;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAwH;iBAChK;YACH;SACD;IACH;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;IACR;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;QACN,SAAS;YAAE,OAAO;QAAqB;QACvC,UAAU;YACR;gBACE,IAAI,IAAA,8GAAM;gBACV,MAAM;gBACN,SAAS;oBACP,OAAO;oBACP,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAoG;oBAC3I;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAsC;iBAC9E;YACH;YACA;gBACE,IAAI,IAAA,8GAAM;gBACV,MAAM;gBACN,SAAS;oBACP,OAAO;oBACP,UAAU;oBACV,QAAQ;gBACV;gBACA,UAAU;oBACR;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAkM;oBACzO;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAoG;oBAC3I;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAA4I;oBACnL;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAoG;oBAC3I;wBAAE,IAAI,IAAA,8GAAM;wBAAI,MAAM;wBAAQ,SAAS;oBAAiG;iBACzI;YACH;SACD;IACH;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;IACR;IACA;QACE,IAAI,IAAA,8GAAM;QACV,MAAM;QACN,SAAS;YAAE,OAAO;QAAoC;QACtD,UAAU;YACR;gBAAE,IAAI,IAAA,8GAAM;gBAAI,MAAM;gBAAQ,SAAS;YAAgF;YACvH;gBAAE,IAAI,IAAA,8GAAM;gBAAI,MAAM;gBAAQ,SAAS;YAA2F;YAClI;gBAAE,IAAI,IAAA,8GAAM;gBAAI,MAAM;gBAAQ,SAAS;YAAwJ;YAC/L;gBAAE,IAAI,IAAA,8GAAM;gBAAI,MAAM;gBAAQ,SAAS;YAAyE;YAChH;gBAAE,IAAI,IAAA,8GAAM;gBAAI,MAAM;gBAAQ,SAAS;YAA6D;SACrG;IACH;CACD","debugId":null}},
    {"offset": {"line": 917, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/halca/finance-type/my-cv-app/pages/index.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport BlockEditor from \"../components/BlockEditor\";\r\nimport blocksToHTML from \"../utils/blocksToHTML\";\r\nimport { initialBlocks } from \"../data/initialCV\";\r\nimport { Block } from \"../utils/types\";\r\n\r\nexport default function Home() {\r\n  const [blocks, setBlocks] = useState<Block[]>(initialBlocks);\r\n  const [pdfUrl, setPdfUrl] = useState<string>(\"\");\r\n  const [fontScale, setFontScale] = useState<number>(1);\r\n  const [showWarning, setShowWarning] = useState<boolean>(false);\r\n  const previewRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Fonction pour calculer la taille de police optimale\r\n  const calculateOptimalFontScale = () => {\r\n    if (!previewRef.current) return 1;\r\n  \r\n    // Hauteur maximale A4 approximative en pixels\r\n    const maxHeight = 1050;\r\n    let scale = 1;\r\n  \r\n    // Créer un div temporaire pour mesurer\r\n    const tempDiv = document.createElement(\"div\");\r\n    tempDiv.style.width = \"210mm\";\r\n    tempDiv.style.padding = \"15mm\";\r\n    tempDiv.style.boxSizing = \"border-box\";\r\n    tempDiv.style.position = \"absolute\";\r\n    tempDiv.style.visibility = \"hidden\";\r\n    document.body.appendChild(tempDiv);\r\n  \r\n    // Itérer pour trouver la plus grande taille qui tient\r\n    let currentScale = 1;\r\n    let step = 0.02; // petit pas pour précision\r\n    while (currentScale > 0.5) {\r\n      tempDiv.style.fontSize = `${currentScale}em`;\r\n      tempDiv.style.lineHeight = `${1.1 * currentScale}`;\r\n      tempDiv.innerHTML = blocksToHTML(blocks, currentScale);\r\n      const contentHeight = tempDiv.scrollHeight;\r\n  \r\n      if (contentHeight <= maxHeight) {\r\n        scale = currentScale;\r\n        break;\r\n      }\r\n      currentScale -= step;\r\n    }\r\n  \r\n    document.body.removeChild(tempDiv);\r\n    return scale;\r\n  };\r\n  \r\n\r\n  // Vérifier le dépassement à chaque changement de blocks avec délai\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      const scale = calculateOptimalFontScale();\r\n      setFontScale(scale);\r\n      setShowWarning(scale < 1);\r\n    }, 100); // Délai pour laisser le DOM se mettre à jour\r\n    \r\n    return () => clearTimeout(timer);\r\n  }, [blocks]);\r\n\r\n  const handleGeneratePDF = async () => {\r\n    const res = await fetch(\"/api/generate-pdf\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ blocks, fontScale }),\r\n    });\r\n    const blob = await res.blob();\r\n    setPdfUrl(URL.createObjectURL(blob));\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", gap: \"2rem\" }}>\r\n      <div style={{ flex: 1 }}>\r\n        <BlockEditor blocks={blocks} setBlocks={setBlocks} />\r\n      </div>\r\n      <div style={{ flex: 1, overflow: \"auto\", height: \"95vh\" }}>\r\n        {showWarning && (\r\n          <div style={{\r\n            backgroundColor: \"#fff3cd\",\r\n            border: \"1px solid #ffeaa7\",\r\n            borderRadius: \"4px\",\r\n            padding: \"8px 12px\",\r\n            margin: \"10px 0\",\r\n            color: \"#856404\",\r\n            fontSize: \"14px\"\r\n          }}>\r\n            ⚠️ Attention : Tu dépasses la première page ! La taille de police a été réduite à {Math.round(fontScale * 100)}% pour tenir sur une page.\r\n          </div>\r\n        )}\r\n        <div\r\n          ref={previewRef}\r\n          style={{\r\n            width: \"210mm\",\r\n            minHeight: \"297mm\",\r\n            margin: \"20px auto\",\r\n            padding: \"15mm\",\r\n            border: \"1px solid #000\",\r\n            boxSizing: \"border-box\",\r\n            backgroundColor: \"#fff\",\r\n            fontSize: `${fontScale}em`,\r\n            lineHeight: `${1.1 * fontScale}`,\r\n          }}\r\n          dangerouslySetInnerHTML={{ __html: blocksToHTML(blocks, fontScale) }}\r\n        />\r\n        <div style={{ marginTop: \"1rem\", display: \"flex\", gap: \"8px\" }}>\r\n          <button onClick={handleGeneratePDF}>Générer PDF</button>\r\n          <button onClick={() => {\r\n            const scale = calculateOptimalFontScale();\r\n            setFontScale(scale);\r\n            setShowWarning(scale < 1);\r\n          }} style={{ fontSize: \"12px\" }}>\r\n            Recalculer taille\r\n          </button>\r\n        </div>\r\n        {pdfUrl && <iframe src={pdfUrl} width=\"100%\" height=\"500px\" style={{ marginTop: \"1rem\" }} />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;;AAGe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAU,4HAAa;IAC3D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAS;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAS;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+GAAQ,EAAU;IACxD,MAAM,aAAa,IAAA,6GAAM,EAAiB;IAE1C,sDAAsD;IACtD,MAAM,4BAA4B;QAChC,IAAI,CAAC,WAAW,OAAO,EAAE,OAAO;QAEhC,8CAA8C;QAC9C,MAAM,YAAY;QAClB,IAAI,QAAQ;QAEZ,uCAAuC;QACvC,MAAM,UAAU,SAAS,aAAa,CAAC;QACvC,QAAQ,KAAK,CAAC,KAAK,GAAG;QACtB,QAAQ,KAAK,CAAC,OAAO,GAAG;QACxB,QAAQ,KAAK,CAAC,SAAS,GAAG;QAC1B,QAAQ,KAAK,CAAC,QAAQ,GAAG;QACzB,QAAQ,KAAK,CAAC,UAAU,GAAG;QAC3B,SAAS,IAAI,CAAC,WAAW,CAAC;QAE1B,sDAAsD;QACtD,IAAI,eAAe;QACnB,IAAI,OAAO,MAAM,2BAA2B;QAC5C,MAAO,eAAe,IAAK;YACzB,QAAQ,KAAK,CAAC,QAAQ,GAAG,GAAG,aAAa,EAAE,CAAC;YAC5C,QAAQ,KAAK,CAAC,UAAU,GAAG,GAAG,MAAM,cAAc;YAClD,QAAQ,SAAS,GAAG,IAAA,yHAAY,EAAC,QAAQ;YACzC,MAAM,gBAAgB,QAAQ,YAAY;YAE1C,IAAI,iBAAiB,WAAW;gBAC9B,QAAQ;gBACR;YACF;YACA,gBAAgB;QAClB;QAEA,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,OAAO;IACT;IAGA,mEAAmE;IACnE,IAAA,gHAAS,EAAC;QACR,MAAM,QAAQ,WAAW;YACvB,MAAM,QAAQ;YACd,aAAa;YACb,eAAe,QAAQ;QACzB,GAAG,MAAM,6CAA6C;QAEtD,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;KAAO;IAEX,MAAM,oBAAoB;QACxB,MAAM,MAAM,MAAM,MAAM,qBAAqB;YAC3C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ;YAAU;QAC3C;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,UAAU,IAAI,eAAe,CAAC;IAChC;IAEA,qBACE,qKAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,KAAK;QAAO;;0BACzC,qKAAC;gBAAI,OAAO;oBAAE,MAAM;gBAAE;0BACpB,cAAA,qKAAC,8HAAW;oBAAC,QAAQ;oBAAQ,WAAW;;;;;;;;;;;0BAE1C,qKAAC;gBAAI,OAAO;oBAAE,MAAM;oBAAG,UAAU;oBAAQ,QAAQ;gBAAO;;oBACrD,6BACC,qKAAC;wBAAI,OAAO;4BACV,iBAAiB;4BACjB,QAAQ;4BACR,cAAc;4BACd,SAAS;4BACT,QAAQ;4BACR,OAAO;4BACP,UAAU;wBACZ;;4BAAG;4BACkF,KAAK,KAAK,CAAC,YAAY;4BAAK;;;;;;;kCAGnH,qKAAC;wBACC,KAAK;wBACL,OAAO;4BACL,OAAO;4BACP,WAAW;4BACX,QAAQ;4BACR,SAAS;4BACT,QAAQ;4BACR,WAAW;4BACX,iBAAiB;4BACjB,UAAU,GAAG,UAAU,EAAE,CAAC;4BAC1B,YAAY,GAAG,MAAM,WAAW;wBAClC;wBACA,yBAAyB;4BAAE,QAAQ,IAAA,yHAAY,EAAC,QAAQ;wBAAW;;;;;;kCAErE,qKAAC;wBAAI,OAAO;4BAAE,WAAW;4BAAQ,SAAS;4BAAQ,KAAK;wBAAM;;0CAC3D,qKAAC;gCAAO,SAAS;0CAAmB;;;;;;0CACpC,qKAAC;gCAAO,SAAS;oCACf,MAAM,QAAQ;oCACd,aAAa;oCACb,eAAe,QAAQ;gCACzB;gCAAG,OAAO;oCAAE,UAAU;gCAAO;0CAAG;;;;;;;;;;;;oBAIjC,wBAAU,qKAAC;wBAAO,KAAK;wBAAQ,OAAM;wBAAO,QAAO;wBAAQ,OAAO;4BAAE,WAAW;wBAAO;;;;;;;;;;;;;;;;;;AAI/F","debugId":null}}]
}