module.exports=[5500,a=>a.a(async(b,c)=>{try{let b=await a.y("react-resizable-panels");a.n(b),c()}catch(a){c(a)}},!0),7612,(a,b,c)=>{b.exports=a.x("@hello-pangea/dnd",()=>require("@hello-pangea/dnd"))},6351,a=>a.a(async(b,c)=>{try{let b=await a.y("uuid");a.n(b),c()}catch(a){c(a)}},!0),2560,a=>{"use strict";a.s(["canMoveBlock",()=>e,"findBlockById",()=>f,"getAllowedChildTypesForParent",()=>c]);let b={header:[void 0],contact:[void 0],divider:[void 0],section:[void 0],subsection:["section"],text:[void 0,"section","subsection"]},c=a=>Object.entries(b).filter(([,b])=>b.includes(a)).map(([a])=>a),d=(a,b)=>{let c=(a,b,d)=>{for(let e of a){if(e.id===b)return d;if(e.children&&e.children.length>0){let a=c(e.children,b,d+1);if(-1!==a)return a}}return -1};return c(a,b,0)},e=(a,c)=>{let e,{source:g,destination:h}=a;if(h.parentId&&((a,b,c)=>{let d=f(a,b);if(!d)return!1;let e=[...d.children||[]];for(;e.length;){let a=e.shift();if(a.id===c)return!0;a.children&&a.children.length>0&&e.push(...a.children)}return!1})(c,g.blockId,h.parentId))return!1;if(h.parentId){let a=f(c,h.parentId);if(!a)return!1;e=a.type}return!!b[g.blockType].includes(e)&&(d(c,g.blockId),!((e?d(c,h.parentId)+1:0)+1>3))},f=(a,b)=>{for(let c of a){if(c.id===b)return c;if(c.children){let a=f(c.children,b);if(a)return a}}}},954,a=>a.a(async(b,c)=>{try{a.s(["default",()=>n]);var d=a.i(8171),e=a.i(7669),f=a.i(7612),g=a.i(6351),h=a.i(2560),i=b([g]);[g]=i.then?(await i)():i;let j={header:{label:"En-tête",description:"Nom principal affiché tout en haut du CV",color:"#2563eb",icon:"👤"},contact:{label:"Contact",description:"Email, téléphone, adresse et lien LinkedIn",color:"#0f766e",icon:"✉️"},divider:{label:"Séparateur",description:"Fine ligne horizontale pour aérer le CV",color:"#6b7280",icon:"─"},section:{label:"Section",description:"Bloc titre pour expériences, formations, etc.",color:"#9333ea",icon:"📂"},subsection:{label:"Sous-section",description:"Entrée détaillée à l'intérieur d'une section",color:"#f97316",icon:"📄"},text:{label:"Texte",description:"Paragraphe libre ou bullet point",color:"#1f2937",icon:"✏️"}},k=a=>j[a],l=a=>{try{let b=document.createElement("div");b.innerHTML=a;let c=(a,b)=>{let c=document.createElement(b);for(;a.firstChild;)c.appendChild(a.firstChild);return a.parentNode?.replaceChild(c,a),c};b.querySelectorAll("b").forEach(a=>c(a,"strong")),b.querySelectorAll("i").forEach(a=>c(a,"em")),b.querySelectorAll("span").forEach(a=>{let b=a.style.textDecoration||a.getAttribute("style")||"";b&&b.toLowerCase().includes("underline")&&c(a,"u")});let d=new Set(["STRONG","EM","U","BR","UL","OL","LI"]),e=a=>{if(a.nodeType===Node.COMMENT_NODE)return void a.parentNode?.removeChild(a);if(a.nodeType===Node.ELEMENT_NODE)if(d.has(a.tagName))[...a.attributes].forEach(b=>a.removeAttribute(b.name));else{let b=a.parentNode;if(!b)return;for(;a.firstChild;)b.insertBefore(a.firstChild,a);b.removeChild(a);return}Array.from(a.childNodes).forEach(e)};return e(b),b.innerHTML}catch{return a}},m=({value:a,onChange:b,placeholder:c,singleLine:f,style:g})=>{let h=(0,e.useRef)(null),i=(0,e.useRef)(null);(0,e.useEffect)(()=>{h.current&&h.current.innerHTML!==a&&(h.current.innerHTML=a||"")},[a]);let j=()=>{let a=window.getSelection();a&&a.rangeCount>0&&(i.current=a.getRangeAt(0))},k=()=>{let a=window.getSelection();a&&i.current&&(a.removeAllRanges(),a.addRange(i.current))},m=c=>{k(),h.current?.focus(),document.execCommand(c);let d=l(h.current?.innerHTML||"");d!==a&&b(d)},n=c=>{((c,d)=>{k(),h.current?.focus(),document.execCommand(c,!1,d);let e=l(h.current?.innerHTML||"");e!==a&&b(e)})("insertHTML",c)},o={padding:"2px 6px",border:"1px solid #d1d5db",borderRadius:4,background:"#fff",fontSize:12,cursor:"pointer"};return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{display:"flex",gap:6,marginBottom:6,flexWrap:"wrap"},children:[(0,d.jsx)("button",{type:"button",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>m("bold"),children:"B"}),(0,d.jsx)("button",{type:"button",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>m("italic"),children:"I"}),(0,d.jsx)("button",{type:"button",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>m("underline"),children:"U"}),(0,d.jsx)("span",{style:{width:8}}),(0,d.jsx)("button",{type:"button",title:"Liste à puces",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>m("insertUnorderedList"),children:"•"}),(0,d.jsx)("button",{type:"button",title:"Liste numérotée",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>m("insertOrderedList"),children:"1."}),(0,d.jsx)("button",{type:"button",title:"Augmenter le retrait",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>m("indent"),children:"→"}),(0,d.jsx)("button",{type:"button",title:"Diminuer le retrait",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>m("outdent"),children:"←"}),(0,d.jsx)("span",{style:{width:8}}),(0,d.jsx)("button",{type:"button",title:"Insérer tiret demi-cadratin",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>n("– "),children:"–"}),(0,d.jsx)("button",{type:"button",title:"Insérer tiret cadratin",style:o,onMouseDown:a=>a.preventDefault(),onClick:()=>n("— "),children:"—"})]}),(0,d.jsx)("div",{ref:h,contentEditable:!0,suppressContentEditableWarning:!0,onInput:()=>{let c=l(h.current?.innerHTML||"");c!==a&&b(c)},onKeyDown:a=>{if(f&&"Enter"===a.key)return void a.preventDefault();if(!f&&"Enter"===a.key&&a.shiftKey||!f&&"Enter"===a.key&&!a.shiftKey&&!(()=>{let a=window.getSelection(),b=a?.anchorNode;for(;b;){if(b.tagName){let a=(b.tagName||"").toUpperCase();if("LI"===a||"UL"===a||"OL"===a)return!0}b=b.parentNode}return!1})()){a.preventDefault(),n("<br>");return}},onKeyUp:j,onMouseUp:j,onBlur:j,style:{minHeight:f?28:60,border:"1px solid #d1d5db",borderRadius:4,padding:8,background:"#fff",outline:"none",whiteSpace:f?"nowrap":"pre-wrap",overflow:"auto",transition:"border-color 0.2s ease, box-shadow 0.2s ease",...g},"data-editor":"true","data-placeholder":c}),(0,d.jsx)("style",{children:`
        [contenteditable][data-placeholder]:empty:before {
          content: attr(data-placeholder);
          color: #9ca3af;
        }
        [data-editor="true"]:focus {
          border-color: #3b82f6 !important;
          box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.14);
        }
      `})]})},n=({blocks:a,setBlocks:b,scrollContainerRef:c})=>{let[i,j]=(0,e.useState)({}),[l,n]=(0,e.useState)(null),[o,p]=(0,e.useState)(!1),q=(0,e.useRef)(0),r=(0,e.useRef)(null),[s,t]=(0,e.useState)(null),[u,v]=(0,e.useState)({}),[w,x]=(0,e.useState)({}),[y,z]=(0,e.useState)({}),A=(0,e.useRef)(!1);(0,e.useEffect)(()=>{if(A.current||0===a.length)return;let b={},c=a=>{a.forEach(a=>{b[a.id]=!0,a.children&&a.children.length>0&&c(a.children)})};c(a),z(b),A.current=!0},[a]);let[B,C]=(0,e.useState)(null);(0,e.useEffect)(()=>{if(!B)return;let a=document.querySelector(`[data-block-id="${B}"]`);if(!a)return;a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("block-editor__pulse");let b=window.setTimeout(()=>{a.classList.remove("block-editor__pulse"),C(null)},1400);return()=>{a.classList.remove("block-editor__pulse"),window.clearTimeout(b)}},[B]);let D=a=>{if(!a)return!1;let b=a.replace(/<[^>]*>/g,"").replace(/\u00A0/g," ").trim();return/[A-Za-zÀ-ÖØ-öø-ÿ0-9]/.test(b)};(0,e.useEffect)(()=>{let a=a=>{q.current=a.clientY};return o?(window.addEventListener("mousemove",a),null==r.current&&(r.current=window.setInterval(()=>{let a=c?.current;if(!a)return;let b=a.getBoundingClientRect(),d=q.current;d>b.bottom-80?a.scrollTop+=16:d<b.top+80&&(a.scrollTop-=16)},16))):(window.removeEventListener("mousemove",a),null!=r.current&&(window.clearInterval(r.current),r.current=null)),()=>{window.removeEventListener("mousemove",a),null!=r.current&&(window.clearInterval(r.current),r.current=null)}},[o,c]);let E=(c,d)=>{let e=d||c&&i[c]||"text",f=c?(0,h.findBlockById)(a,c)?.type:void 0;if(!(0,h.getAllowedChildTypesForParent)(f).includes(e)){n("Type de bloc non autorisé ici"),setTimeout(()=>n(null),1800);return}let j={id:(0,g.v4)(),type:e,content:"contact"===e?{email:"",phone:"",address:"",linkedin:""}:"divider"===e?void 0:"",children:(0,h.getAllowedChildTypesForParent)(e).length>0?[]:void 0},k=c?F(a,c,j):[...a,j];b(k),z(a=>({...a,[j.id]:!1,...c?{[c]:!1}:{}})),C(j.id)},F=(a,b,c)=>a.map(a=>a.id===b?{...a,children:[...a.children||[],c]}:a.children?{...a,children:F(a.children,b,c)}:a),G=a=>({...a,id:(0,g.v4)(),children:a.children?.map(G)??[]}),H=(a,b)=>{let c=null,d=[];for(let e of a){if(e.id===b){let a=G(e);c=a.id,d.push(e,a);continue}if(e.children&&e.children.length>0){let{blocks:a,cloneId:f}=H(e.children,b);if(f){c=f,d.push({...e,children:a});continue}d.push(e);continue}d.push(e)}return{blocks:d,cloneId:c}},I=(a,b)=>a.filter(a=>a.id!==b).map(a=>a.children?{...a,children:I(a.children,b)}:a),J=(a,b,c)=>a.map(a=>a.id===b?{...a,content:c}:a.children?{...a,children:J(a.children,b,c)}:a),K=(c,d)=>{b(J(a,c,d))},L=(a,b,c)=>{let d=[...a],[e]=d.splice(b,1);return d.splice(c,0,e),d},M=(a,b,c,d)=>"root"===b?L(a,c,d):a.map(a=>{if(a.id===b&&a.children){let b=[...a.children],[e]=b.splice(c,1);return b.splice(d,0,e),{...a,children:b}}return a.children?{...a,children:M(a.children,b,c,d)}:a}),N=(a,b,c)=>{let d;if("root"===b.droppableId)d=a[b.index];else{let c=(0,h.findBlockById)(a,b.droppableId);c&&c.children&&(d=c.children[b.index])}if(!d)return a;let e=O(a,b.droppableId,b.index);return P(e,c.droppableId,c.index,d)},O=(a,b,c)=>"root"===b?a.filter((a,b)=>b!==c):a.map(a=>{if(a.id===b&&a.children){let b=a.children.filter((a,b)=>b!==c);return{...a,children:b}}return a.children?{...a,children:O(a.children,b,c)}:a}),P=(a,b,c,d)=>{if("root"===b){let b=[...a];return b.splice(c,0,d),b}return a.map(a=>{if(a.id===b){let b=[...a.children||[]];return b.splice(c,0,d),{...a,children:b}}return a.children?{...a,children:P(a.children,b,c,d)}:a})},Q=(c,e,g,l)=>{let n=(0,h.getAllowedChildTypesForParent)(c.type),o=n.length>0,p=e?(0,h.findBlockById)(a,e):void 0,q=p?.type==="subsection",r=k(c.type),t=y[c.id],A="divider"!==c.type,B={border:"1px solid #d4d8dd",backgroundColor:"#fff",borderRadius:6,padding:"6px 10px",fontSize:12,display:"flex",alignItems:"center",gap:4,cursor:"pointer",color:"#0f172a",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",transition:"background-color 0.15s ease, color 0.15s ease"};return(0,d.jsxs)("div",{"data-block-id":c.id,style:{border:`1px solid ${l?"#60a5fa":"#e2e8f0"}`,borderRadius:12,padding:"14px 16px",marginBottom:10,backgroundColor:"#ffffff",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s ease",position:"relative",borderLeft:`4px solid ${r.color}`},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:10*!t},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,flex:1},children:[A?(0,d.jsx)("button",{type:"button",onClick:()=>z(a=>({...a,[c.id]:!a[c.id]})),style:{border:"1px solid #cbd5f5",backgroundColor:t?"#e0e7ff":"#fff",color:"#3b82f6",width:28,height:28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:14},children:t?"▸":"▾"}):(0,d.jsx)("div",{style:{width:28,height:28}}),(0,d.jsx)("div",{...g??{},style:{cursor:"grab",padding:"6px 8px",borderRadius:6,backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",color:"#1e293b",fontSize:12,minWidth:28},title:"Glisser pour déplacer",children:"⋮⋮"}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,d.jsx)("span",{style:{fontSize:20},"aria-hidden":!0,children:r.icon}),(0,d.jsx)("span",{style:{fontSize:13,fontWeight:700,textTransform:"uppercase",letterSpacing:"0.04em",color:r.color,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:r.label})]}),(0,d.jsx)("span",{style:{fontSize:12,color:"#64748b",maxWidth:420},children:r.description})]})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[o&&(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,d.jsx)("select",{value:i[c.id]||n[0]||"text",onChange:a=>j({...i,[c.id]:a.target.value}),style:{padding:"6px 8px",borderRadius:6,border:"1px solid #d1d5db",fontSize:12,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},title:"Choisir un type de sous-bloc",children:n.map(a=>(0,d.jsx)("option",{value:a,children:k(a).label},a))}),(0,d.jsx)("button",{type:"button",onClick:()=>E(c.id),style:{...B,borderColor:"#bfdbfe",color:"#1d4ed8",backgroundColor:"#eff6ff"},children:"+ Ajouter"})]}),(0,d.jsxs)("button",{type:"button",onClick:()=>(c=>{let{blocks:d,cloneId:e}=H(a,c);b(d),e&&(z(a=>({...a,[e]:!1})),C(e))})(c.id),style:B,title:"Dupliquer le bloc",children:["⧉",(0,d.jsx)("span",{children:"Copier"})]}),(0,d.jsx)("button",{type:"button",onClick:()=>{let d;return d=c.id,b(I(a,d))},style:{...B,borderColor:"#fecaca",color:"#b91c1c",backgroundColor:"#fff1f2"},title:"Supprimer le bloc",children:"✕"})]})]}),!t&&(0,d.jsx)("div",{style:{marginTop:4},children:"divider"===c.type?(0,d.jsx)("hr",{style:{border:"none",borderTop:"2px solid #e5e7eb",margin:"8px 0"}}):"contact"===c.type?(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,d.jsx)("input",{placeholder:"Email",value:c.content?.email||"",onChange:a=>K(c.id,{...c.content,email:a.target.value}),style:{padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:6,maxWidth:"640px",backgroundColor:"#f8fafc",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},"data-contact-input":!0}),(0,d.jsx)("input",{placeholder:"Téléphone",value:c.content?.phone||"",onChange:a=>K(c.id,{...c.content,phone:a.target.value}),style:{padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:6,maxWidth:"640px",backgroundColor:"#f8fafc",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},"data-contact-input":!0}),(0,d.jsx)("input",{placeholder:"Adresse",value:c.content?.address||"",onChange:a=>K(c.id,{...c.content,address:a.target.value}),style:{padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:6,maxWidth:"640px",backgroundColor:"#f8fafc",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},"data-contact-input":!0}),(0,d.jsx)("input",{placeholder:"LinkedIn",value:c.content?.linkedin||"",onChange:a=>K(c.id,{...c.content,linkedin:a.target.value}),style:{padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:6,maxWidth:"640px",backgroundColor:"#f8fafc",transition:"border-color 0.2s ease, box-shadow 0.2s ease"},"data-contact-input":!0})]}):"subsection"===c.type?(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,d.jsx)(m,{value:c.content?.title||"",onChange:a=>K(c.id,{...c.content,title:a}),placeholder:"Titre (ex: JCDecaux)",singleLine:!0,style:{maxWidth:"600px"}}),(0,d.jsxs)("div",{style:{display:"flex",gap:8},children:[D(c.content?.subtitle)||u[c.id]?(0,d.jsx)("button",{type:"button",onClick:()=>{let a={...u};delete a[c.id],v(a),K(c.id,{...c.content,subtitle:""})},style:{padding:"4px 8px",fontSize:12,border:"1px solid #d1d5db",borderRadius:4,background:"#fff",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:"Supprimer sous-titre"}):(0,d.jsx)("button",{type:"button",onClick:()=>v({...u,[c.id]:!0}),style:{padding:"4px 8px",fontSize:12,border:"1px solid #d1d5db",borderRadius:4,background:"#fff",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:"+ Sous-titre"}),D(c.content?.period)||w[c.id]?(0,d.jsx)("button",{type:"button",onClick:()=>{let a={...w};delete a[c.id],x(a),K(c.id,{...c.content,period:""})},style:{padding:"4px 8px",fontSize:12,border:"1px solid #d1d5db",borderRadius:4,background:"#fff",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:"Supprimer date"}):(0,d.jsx)("button",{type:"button",onClick:()=>x({...w,[c.id]:!0}),style:{padding:"4px 8px",fontSize:12,border:"1px solid #d1d5db",borderRadius:4,background:"#fff",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:"+ Date"})]}),(D(c.content?.subtitle)||u[c.id])&&(0,d.jsx)(m,{value:c.content?.subtitle||"",onChange:a=>K(c.id,{...c.content,subtitle:a}),placeholder:"Sous-titre (ex: Data Scientist)",singleLine:!0,style:{maxWidth:"600px"}}),(D(c.content?.period)||w[c.id])&&(0,d.jsx)(m,{value:c.content?.period||"",onChange:a=>K(c.id,{...c.content,period:a}),placeholder:"Période (ex: 11/2024 -- 05/2025)",singleLine:!0,style:{fontStyle:"italic",maxWidth:"600px"}})]}):(0,d.jsx)(m,{value:"header"===c.type||"section"===c.type?c.content?.title||"":"string"==typeof c.content?c.content:"",onChange:a=>{"header"===c.type||"section"===c.type?K(c.id,{...c.content,title:a}):K(c.id,a)},singleLine:"header"===c.type,placeholder:"header"===c.type?"Nom complet":"section"===c.type?"Titre de section":"Contenu du texte...",style:{fontSize:"header"===c.type?18:14,maxWidth:q?"560px":"640px"}})}),o&&(0,d.jsx)(f.Droppable,{droppableId:c.id,type:"CHILD",isDropDisabled:!!l||"subsection"===s&&"subsection"===c.type,children:(a,b)=>(0,d.jsxs)("div",{ref:a.innerRef,...a.droppableProps,style:{marginLeft:16,marginTop:12*!t,paddingLeft:12,borderLeft:"2px solid #e5e7eb",backgroundColor:b.isDraggingOver?"#e0f2fe":"transparent",borderRadius:6,minHeight:b.isDraggingOver?32:t?12:28,transition:"background-color 0.2s ease"},children:[!t&&c.children?.map((a,b)=>(0,d.jsx)(f.Draggable,{draggableId:a.id,index:b,children:(b,e)=>(0,d.jsx)("div",{ref:b.innerRef,...b.draggableProps,children:Q(a,c.id,b.dragHandleProps,e.isDragging)})},a.id)),a.placeholder,t&&c.children&&c.children.length>0&&(0,d.jsx)("div",{style:{fontSize:12,color:"#94a3b8",fontStyle:"italic",padding:"4px 0 6px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:"Contenu replié"})]})})]})};return(0,d.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f8fafc"},children:[l&&(0,d.jsx)("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#b91c1c",borderRadius:6,fontSize:"13px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:l}),(0,d.jsx)("style",{children:`
        .block-editor__pulse {
          animation: blockEditorPulse 0.4s ease-in-out 0s 2 alternate;
        }
        @keyframes blockEditorPulse {
          from { box-shadow: 0 0 0 rgba(59, 130, 246, 0.4); }
          to { box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.1); }
        }
        input[data-contact-input]:focus {
          border-color: #3b82f6 !important;
          box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.14);
          outline: none;
        }
      `}),(0,d.jsxs)("div",{style:{marginBottom:24,padding:"18px 20px",backgroundColor:"#fff",borderRadius:12,border:"1px solid #e1e5e9",boxShadow:"0 10px 30px rgba(15, 23, 42, 0.05)",display:"flex",flexDirection:"column",gap:16},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{style:{margin:0,color:"#0f172a",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:20,fontWeight:700},children:"Compose ton CV bloc par bloc"}),(0,d.jsx)("p",{style:{margin:"6px 0 0 0",color:"#475569",fontSize:14,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",lineHeight:1.5},children:"Ajoute les sections dont tu as besoin puis glisse‑dépose pour tout réorganiser. Les placements impossibles sont automatiquement bloqués."})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,d.jsx)("span",{style:{fontSize:13,fontWeight:600,textTransform:"uppercase",color:"#3b82f6",letterSpacing:"0.06em",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:"Ajouter un bloc rapidement"}),(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},children:(0,h.getAllowedChildTypesForParent)(void 0).map(a=>{let b=k(a);return(0,d.jsxs)("button",{type:"button",onClick:()=>E(void 0,a),style:{textAlign:"left",padding:"14px 16px",borderRadius:10,border:"1px solid #e2e8f0",background:"linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(241, 245, 249, 0.95))",cursor:"pointer",transition:"transform 0.18s ease, box-shadow 0.18s ease",display:"flex",flexDirection:"column",gap:8,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 12px 24px rgba(15, 23, 42, 0.08)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="none"},children:[(0,d.jsx)("span",{style:{fontSize:22},"aria-hidden":!0,children:b.icon}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontWeight:700,color:b.color,fontSize:14},children:b.label}),(0,d.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:12,color:"#64748b",lineHeight:1.4},children:b.description})]})]},a)})})]})]}),(0,d.jsx)(f.DragDropContext,{onDragEnd:c=>{let d;if(p(!1),t(null),!c.destination)return;let{source:e,destination:f}=c;if("root"===e.droppableId)d=a[e.index];else{let b=(0,h.findBlockById)(a,e.droppableId);b&&b.children&&(d=b.children[e.index])}if(!d)return;let g={source:{blockId:d.id,parentId:"root"!==e.droppableId?e.droppableId:void 0,blockType:d.type,index:e.index},destination:{parentId:"root"!==f.droppableId?f.droppableId:void 0,index:f.index}};if(!(0,h.canMoveBlock)(g,a)){n("Déplacement non autorisé à cet endroit"),setTimeout(()=>n(null),1800),p(!1);return}b(((a,b)=>{let{source:c,destination:d}=b;return d?"root"===c.droppableId&&"root"===d.droppableId?L(a,c.index,d.index):c.droppableId===d.droppableId?M(a,c.droppableId,c.index,d.index):N(a,c,d):a})(a,c)),p(!1)},onDragStart:b=>{p(!0);let c=(0,h.findBlockById)(a,b.draggableId);t(c?.type||null)},children:(0,d.jsx)(f.Droppable,{droppableId:"root",type:"ROOT",isDropDisabled:"subsection"===s,children:(b,c)=>(0,d.jsxs)("div",{ref:b.innerRef,...b.droppableProps,style:{minHeight:"400px",backgroundColor:c.isDraggingOver?"#f0f9ff":"transparent",borderRadius:"8px",padding:c.isDraggingOver?"16px":"0",border:c.isDraggingOver?"2px dashed #3b82f6":"none",transition:"all 0.2s ease"},children:[0===a.length?(0,d.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#9ca3af",fontSize:"16px"},children:"Aucun bloc. Ajoutez votre premier bloc pour commencer."}):a.map((a,b)=>(0,d.jsx)(f.Draggable,{draggableId:a.id,index:b,children:(b,c)=>(0,d.jsx)("div",{ref:b.innerRef,...b.draggableProps,style:{...b.draggableProps.style,opacity:c.isDragging?.8:1},children:Q(a,void 0,b.dragHandleProps,c.isDragging)})},a.id)),b.placeholder,c.isDraggingOver&&(0,d.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#3b82f6",fontSize:"14px",fontWeight:"500"},children:"Déposez le bloc ici"})]})})})]})};c()}catch(a){c(a)}},!1),9622,a=>{"use strict";function b(a,c=1){let d=(a,b)=>a.map(a=>{switch(a.type){case"header":{let b=a.content?.title||"";return`<div class="cv-header"><div class="cv-name">${b}</div></div>`}case"contact":{let b=a.content||{},c=[b.email,b.phone,b.address,b.linkedin].filter(Boolean).join(" • ");return`<div class="cv-contact">${c}</div>`}case"text":{let c=a.content||"",e="string"==typeof c?c.replace(/<[^>]*>/g,"").replace(/\u00A0/g," "):"",f=/[A-Za-zÀ-ÖØ-öø-ÿ]/.test(e),g=/Étudiant\s+à\s+IMT\s+Atlantique/i.test(e),h="string"==typeof c&&/<(ul|ol)\b/i.test(c),i="string"==typeof c&&/<br\s*\/?\s*>/i.test(c);if(!f&&!h)return`${d(a.children||[],b+1)}`;if(g)return`<div class="cv-intro">${c}</div>${d(a.children||[],b+1)}`;if(h)return`<div class="cv-text">${c}</div>${d(a.children||[],b+1)}`;if(i){let e=c.split(/<br\s*\/?\s*>/i).map(a=>{let c=a.replace(/<[^>]*>/g,"").replace(/\u00A0/g," ").trim();if(!/[A-Za-zÀ-ÖØ-öø-ÿ]/.test(c))return"";let d=/^\s*[•\-–]/.test(c),e=d?a.replace(/^\s*[•\-–]\s*/,""):a;return d?`<div class="cv-text cv-bullet${b>=2?" cv-bullet--level2":""}">${e}</div>`:`<div class="cv-text">${a}</div>`}).filter(Boolean).join("");return`${e}${d(a.children||[],b+1)}`}let j=/^\s*[•\-–]/.test(e),k=j&&"string"==typeof c?c.replace(/^\s*[•\-–]\s*/,""):c;if(j)return`<div class="cv-text cv-bullet${b>=2?" cv-bullet--level2":""}">${k}</div>${d(a.children||[],b+1)}`;return`<div class="cv-text">${c}</div>${d(a.children||[],b+1)}`}case"divider":return'<hr class="cv-divider"/>';case"section":return`<div class="cv-section">
            <div class="cv-section-title">${a.content?.title||""}</div>
            ${d(a.children||[],b+1)}
          </div>`;case"subsection":{let c=a.content?.title||"",e=a.content?.subtitle||"",f=a.content?.period||"",g=d(a.children||[],b+1),h=g.replace(/<[^>]*>/g,"").replace(/\u00A0/g," ").trim();if(!/[A-Za-zÀ-ÖØ-öø-ÿ]/.test(h))return"";return`<div class="cv-subsection">
            <div class="cv-subsection-header">
              <div>
                <div class="cv-subsection-title">${c}</div>
                ${e?`<div class=\\"cv-subsection-subtitle\\">${e}</div>`:""}
              </div>
              ${f?`<div class=\\"cv-subsection-period\\">${f}</div>`:""}
            </div>
            ${g}
          </div>`}default:return""}}).join("");return`<div class="cv">${d(a,0)}</div>`}a.s(["default",()=>b])},7081,a=>{"use strict";a.s(["default",()=>b]);let b=function(a=1){let b=10*a,c=8*a,d=4*a,e=2*a;return`
  /* Page and typography */
  @page { size: A4; margin: 15mm; }
  .cv { font-family: 'Times New Roman', Times, serif; font-size: ${b}pt; line-height: 1.25; color: #000; }
  .cv h1, .cv h2, .cv h3, .cv h4, .cv p { margin: 0; padding: 0; }
  .cv a { color: inherit; text-decoration: underline; }

  /* Header */
  .cv .cv-header { text-align: center; margin-bottom: ${c}px; }
  .cv .cv-name { font-size: ${18*a}pt; font-weight: 700; }
  .cv .cv-contact { text-align: center; font-size: ${b}pt; margin-top: ${e}px; }
  .cv .cv-intro { text-align: center; font-style: italic; margin-bottom: ${c}px; }

  /* Sections */
  .cv .cv-section { margin-top: ${c}px; }
  .cv .cv-section-title { font-size: ${12*a}pt; text-transform: uppercase; margin: 0 0 ${d}px 0; padding-bottom: ${e}px; border-bottom: 0.5pt solid #000; }

  /* Subsections */
  .cv .cv-subsection { margin-bottom: ${d}px; }
  .cv .cv-subsection-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: ${e}px; column-gap: ${d}px; }
  .cv .cv-subsection-title { font-size: ${b}pt; font-weight: 600; }
  .cv .cv-subsection-subtitle { font-size: ${b}pt; margin-top: ${Math.max(+a,1)}px; }
  .cv .cv-subsection-period { font-size: ${b}pt; font-style: italic; white-space: nowrap; }

  /* Text and bullets */
  .cv .cv-text { font-size: ${b}pt; margin-bottom: ${e}px; }
  .cv .cv-bullet { position: relative; padding-left: ${16*a}px; }
  .cv .cv-bullet::before { content: "–"; position: absolute; left: 0; top: 0; }
  .cv .cv-bullet--level2 { padding-left: ${22*a}px; }
  .cv .cv-bullet--level2::before { content: "•"; }

  /* Divider */
  .cv hr.cv-divider { border: 0; border-top: 0.5pt solid #000; margin: ${c}px 0; }
  `}},3951,a=>a.a(async(b,c)=>{try{a.s([]);var d=a.i(6351),e=b([d]);[d]=e.then?(await e)():e,(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),(0,d.v4)(),c()}catch(a){c(a)}},!1),99,a=>a.a(async(b,c)=>{try{a.s(["default",()=>n,"getServerSideProps",()=>o]);var d=a.i(8171),e=a.i(7669),f=a.i(1965),g=a.i(6047),h=a.i(5500),i=a.i(954),j=a.i(9622),k=a.i(7081),l=a.i(3951),m=b([h,i,l]);[h,i,l]=m.then?(await m)():m;let p=`
  .preview-cv {
    transform: scale(0.8);
    transform-origin: top center;
  }
  
  @media (max-width: 1200px) {
    .preview-cv {
      transform: scale(0.6) !important;
    }
  }
  
  @media (max-width: 768px) {
    .preview-cv {
      transform: scale(0.5) !important;
    }
  }
`;function n(){console.log("CvGeneratorPage component rendered");let[a,b]=(0,e.useState)([]),[c,f]=(0,e.useState)(1),[l,m]=(0,e.useState)(!1),n=(0,e.useRef)(null),o=(0,e.useRef)(null);(0,e.useEffect)(()=>{},[]),(0,e.useEffect)(()=>{},[a]);let q=(0,e.useCallback)(()=>{if(!n.current)return 1;let b=1,c=document.createElement("div");c.style.width="210mm",c.style.padding="15mm",c.style.boxSizing="border-box",c.style.position="absolute",c.style.visibility="hidden",document.body.appendChild(c);let d=1;for(;d>.5;){if(c.innerHTML=`<style>${(0,k.default)(d)}</style>`+(0,j.default)(a,d),c.scrollHeight<=1050){b=d;break}d-=.02}return document.body.removeChild(c),b},[a]);(0,e.useEffect)(()=>{let a=setTimeout(()=>{let a=q();f(a),m(a<1)},100);return()=>clearTimeout(a)},[q]);let r=async()=>{console.log("Generating PDF...",{blocks:a,fontScale:c});try{console.log("Making fetch request to /api/generate-pdf");let b=await fetch("/api/generate-pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blocks:a,fontScale:c})});if(console.log("Response received:",b.status,b.statusText),!b.ok){let a=await b.json();throw console.error("API Error:",a),Error(a.error||`HTTP error! status: ${b.status}`)}console.log("Converting response to blob");let d=await b.blob();console.log("Blob created:",d.size,"bytes");let e=URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download="mon-cv.pdf",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(e),console.log("PDF download initiated")}catch(a){console.error("Erreur lors de la génération du PDF:",a),alert(`Erreur lors de la g\xe9n\xe9ration du PDF: ${a instanceof Error?a.message:"Erreur inconnue"}`)}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("style",{children:p}),(0,d.jsx)("style",{children:(0,k.default)(c)}),(0,d.jsx)(g.default,{variant:"landing",scrollContainerRef:o}),(0,d.jsxs)(h.PanelGroup,{direction:"horizontal",style:{height:"100vh"},children:[(0,d.jsx)(h.Panel,{defaultSize:60,minSize:30,maxSize:80,children:(0,d.jsx)("div",{style:{height:"100%",padding:"1rem",overflow:"auto"},ref:o,children:(0,d.jsx)(i.default,{blocks:a,setBlocks:b,scrollContainerRef:o})})}),(0,d.jsx)(h.PanelResizeHandle,{style:{width:"8px",backgroundColor:"#e1e5e9",cursor:"col-resize",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)("div",{style:{width:"2px",height:"40px",backgroundColor:"#9ca3af",borderRadius:"1px"}})}),(0,d.jsx)(h.Panel,{defaultSize:50,minSize:45,maxSize:60,children:(0,d.jsx)("div",{style:{height:"100vh",overflow:"hidden",backgroundColor:"#f8fafc",padding:"0.5rem",borderLeft:"1px solid #e1e5e9",display:"flex",flexDirection:"column"},children:(0,d.jsxs)("div",{style:{flex:1,overflow:"auto",marginBottom:"0.5rem"},children:[(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",backgroundColor:"#fff",padding:"1rem",borderRadius:"8px",border:"1px solid #e1e5e9",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",flexShrink:0,marginBottom:"10px",position:"relative",zIndex:20},children:(0,d.jsx)("button",{onClick:()=>{console.log("PDF Button clicked!"),r()},style:{padding:"12px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",position:"relative",zIndex:21,pointerEvents:"auto"},children:"Générer PDF"})}),l&&(0,d.jsxs)("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",padding:"8px 12px",margin:"10px 0",color:"#856404",fontSize:"14px",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif",fontWeight:"500"},children:["⚠️ Attention : Tu dépasses la première page ! La taille de police a été réduite à ",Math.round(100*c),"% pour tenir sur une page."]}),(0,d.jsx)("div",{style:{},children:(0,d.jsx)("div",{ref:n,className:"preview-cv",style:{width:"210mm",minHeight:"297mm",padding:"15mm",border:"1px solid #000",boxSizing:"border-box",backgroundColor:"#fff",transform:"scale(0.8)",transformOrigin:"top left",marginBottom:"0.1rem"},dangerouslySetInnerHTML:{__html:(0,j.default)(a,c)}})})]})})})]})]})}async function o(a){let b=(0,f.createPagesServerClient)(a),{data:{session:c}}=await b.auth.getSession();return c?{props:{initialSession:c}}:{redirect:{destination:`/login?redirect=${encodeURIComponent(a.resolvedUrl??"/cv")}`,permanent:!1}}}c()}catch(a){c(a)}},!1),9151,a=>a.a(async(b,c)=>{try{a.s(["config",()=>p,"default",()=>l,"getServerSideProps",()=>o,"getStaticPaths",()=>n,"getStaticProps",()=>m,"handler",()=>x,"reportWebVitals",()=>q,"routeModule",()=>w,"unstable_getServerProps",()=>u,"unstable_getServerSideProps",()=>v,"unstable_getStaticParams",()=>t,"unstable_getStaticPaths",()=>s,"unstable_getStaticProps",()=>r]);var d=a.i(7174),e=a.i(440),f=a.i(382),g=a.i(1553),h=a.i(3859),i=a.i(99),j=a.i(7987),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/cv",pathname:"/cv",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/cv",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__6fd5802f._.js.map