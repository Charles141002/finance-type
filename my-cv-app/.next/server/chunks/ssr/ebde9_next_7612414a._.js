module.exports=[3646,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useIntersection",{enumerable:!0,get:function(){return i}});let d=a.r(7669),e=a.r(458),f="function"==typeof IntersectionObserver,g=new Map,h=[];function i(a){let{rootRef:b,rootMargin:c,disabled:i}=a,j=i||!f,[k,l]=(0,d.useState)(!1),m=(0,d.useRef)(null),n=(0,d.useCallback)(a=>{m.current=a},[]);return(0,d.useEffect)(()=>{if(f){if(j||k)return;let a=m.current;if(a&&a.tagName)return function(a,b,c){let{id:d,observer:e,elements:f}=function(a){let b,c={root:a.root||null,margin:a.rootMargin||""},d=h.find(a=>a.root===c.root&&a.margin===c.margin);if(d&&(b=g.get(d)))return b;let e=new Map;return b={id:c,observer:new IntersectionObserver(a=>{a.forEach(a=>{let b=e.get(a.target),c=a.isIntersecting||a.intersectionRatio>0;b&&c&&b(c)})},a),elements:e},h.push(c),g.set(c,b),b}(c);return f.set(a,b),e.observe(a),function(){if(f.delete(a),e.unobserve(a),0===f.size){e.disconnect(),g.delete(d);let a=h.findIndex(a=>a.root===d.root&&a.margin===d.margin);a>-1&&h.splice(a,1)}}}(a,a=>a&&l(a),{root:null==b?void 0:b.current,rootMargin:c})}else if(!k){let a=(0,e.requestIdleCallback)(()=>l(!0));return()=>(0,e.cancelIdleCallback)(a)}},[j,c,b,k,m.current]),[n,k,(0,d.useCallback)(()=>{l(!1)},[])]}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1024,(a,b,c)=>{"use strict";function d(a,b,c,d){return!1}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getDomainLocale",{enumerable:!0,get:function(){return d}}),a.r(1520),("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},8011,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(7669);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},7767,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"errorOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},8206,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(c,{default:function(){return v},useLinkStatus:function(){return u}});let d=a.r(7112),e=a.r(8171),f=d._(a.r(7669)),g=a.r(7238),h=a.r(7076),i=a.r(8549),j=a.r(7371),k=a.r(821),l=a.r(4362),m=a.r(3646),n=a.r(1024),o=a.r(8502),p=a.r(8011);function q(a,b,c,d){}function r(a){return"string"==typeof a?a:(0,i.formatUrl)(a)}a.r(7767);let s=f.default.forwardRef(function(a,b){let c,d,{href:i,as:s,children:t,prefetch:u=null,passHref:v,replace:w,shallow:x,scroll:y,locale:z,onClick:A,onNavigate:B,onMouseEnter:C,onTouchStart:D,legacyBehavior:E=!1,...F}=a;c=t,E&&("string"==typeof c||"number"==typeof c)&&(c=(0,e.jsx)("a",{children:c}));let G=f.default.useContext(l.RouterContext),H=!1!==u,{href:I,as:J}=f.default.useMemo(()=>{if(!G){let a=r(i);return{href:a,as:s?r(s):a}}let[a,b]=(0,g.resolveHref)(G,i,!0);return{href:a,as:s?(0,g.resolveHref)(G,s):b||a}},[G,i,s]),K=f.default.useRef(I),L=f.default.useRef(J);E&&(d=f.default.Children.only(c));let M=E?d&&"object"==typeof d&&d.ref:b,[N,O,P]=(0,m.useIntersection)({rootMargin:"200px"}),Q=f.default.useCallback(a=>{(L.current!==J||K.current!==I)&&(P(),L.current=J,K.current=I),N(a)},[J,I,P,N]),R=(0,p.useMergedRef)(Q,M);f.default.useEffect(()=>{G&&O&&H&&q(G,I,J,{locale:z})},[J,I,O,z,H,null==G?void 0:G.locale,G]);let S={ref:R,onClick(a){E||"function"!=typeof A||A(a),E&&d.props&&"function"==typeof d.props.onClick&&d.props.onClick(a),G&&(a.defaultPrevented||function(a,b,c,d,e,f,g,i,j){let{nodeName:k}=a.currentTarget;if(!("A"===k.toUpperCase()&&function(a){let b=a.currentTarget.getAttribute("target");return b&&"_self"!==b||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||a.nativeEvent&&2===a.nativeEvent.which}(a)||a.currentTarget.hasAttribute("download"))){if(!(0,h.isLocalURL)(c)){e&&(a.preventDefault(),location.replace(c));return}a.preventDefault(),(()=>{if(j){let a=!1;if(j({preventDefault:()=>{a=!0}}),a)return}let a=null==g||g;"beforePopState"in b?b[e?"replace":"push"](c,d,{shallow:f,locale:i,scroll:a}):b[e?"replace":"push"](d||c,{scroll:a})})()}}(a,G,I,J,w,x,y,z,B))},onMouseEnter(a){E||"function"!=typeof C||C(a),E&&d.props&&"function"==typeof d.props.onMouseEnter&&d.props.onMouseEnter(a),G&&q(G,I,J,{locale:z,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(a){E||"function"!=typeof D||D(a),E&&d.props&&"function"==typeof d.props.onTouchStart&&d.props.onTouchStart(a),G&&q(G,I,J,{locale:z,priority:!0,bypassPrefetchedCheck:!0})}};if((0,j.isAbsoluteUrl)(J))S.href=J;else if(!E||v||"a"===d.type&&!("href"in d.props)){let a=void 0!==z?z:null==G?void 0:G.locale;S.href=(null==G?void 0:G.isLocaleDomain)&&(0,n.getDomainLocale)(J,a,null==G?void 0:G.locales,null==G?void 0:G.domainLocales)||(0,o.addBasePath)((0,k.addLocale)(J,a,null==G?void 0:G.defaultLocale))}return E?f.default.cloneElement(d,S):(0,e.jsx)("a",{...F,...S,children:c})}),t=(0,f.createContext)({pending:!1}),u=()=>(0,f.useContext)(t),v=s;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},6239,(a,b,c)=>{b.exports=a.r(8206)},5038,a=>{"use strict";a.s(["config",()=>B,"default",()=>x,"getServerSideProps",()=>A,"getStaticPaths",()=>z,"getStaticProps",()=>y,"handler",()=>J,"reportWebVitals",()=>C,"routeModule",()=>I,"unstable_getServerProps",()=>G,"unstable_getServerSideProps",()=>H,"unstable_getStaticParams",()=>F,"unstable_getStaticPaths",()=>E,"unstable_getStaticProps",()=>D],5038);var b=a.i(7174),c=a.i(440),d=a.i(382),e=a.i(1553),f=a.i(3859);a.s(["default",()=>t,"getServerSideProps",()=>u],4619);var g=a.i(8171),h=a.i(7669),i=a.i(6239),j=a.i(5749),k=a.i(8918),l=a.i(9652),m=a.i(1965);let n={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at top, rgba(59,130,246,0.12), transparent 55%), rgba(2, 6, 23, 0.96)",padding:"40px 16px"},o={width:"100%",maxWidth:"420px",background:"rgba(15, 23, 42, 0.96)",border:"1px solid rgba(148, 163, 184, 0.25)",borderRadius:"18px",padding:"32px",boxShadow:"0 30px 60px rgba(15, 23, 42, 0.35)",color:"#e2e8f0",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},p={width:"100%",padding:"14px 16px",borderRadius:"12px",border:"1px solid rgba(148, 163, 184, 0.35)",marginBottom:"18px",fontSize:"15px",background:"rgba(15, 23, 42, 0.65)",color:"#f8fafc"},q={width:"100%",padding:"14px",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"#fff",fontWeight:700,fontSize:"15px",cursor:"pointer",marginTop:"8px",transition:"all 0.2s ease"},r={width:"100%",padding:"12px",borderRadius:"12px",border:"1px solid rgba(148, 163, 184, 0.45)",background:"transparent",color:"#cbd5f5",fontWeight:600,fontSize:"14px",cursor:"pointer",marginTop:"12px"},s=a=>/\S+@\S+\.\S+/.test(a);function t({initialSession:a}){let b=(0,l.useSupabaseClient)(),c=(0,k.useRouter)(),d=(0,l.useSession)()??a??null,[e,f]=(0,h.useState)("signin"),[m,t]=(0,h.useState)(""),[u,v]=(0,h.useState)(""),[w,x]=(0,h.useState)(""),[y,z]=(0,h.useState)({}),[A,B]=(0,h.useState)(!1),[C,D]=(0,h.useState)(null),E=(0,h.useMemo)(()=>{let a=c.query.redirect;return Array.isArray(a)?a[0]??"/cv":a??"/cv"},[c.query.redirect]);(0,h.useEffect)(()=>{d?.user&&c.replace("string"==typeof E?E:"/cv").catch(()=>{})},[E,c,d]);let F=async a=>{a.preventDefault();let d={};if(s(m)||(d.email="Merci de saisir une adresse e-mail valide."),u.length<8&&(d.password="Le mot de passe doit contenir au moins 8 caractères."),"signup"===e&&u!==w&&(d.confirmPassword="Les mots de passe ne correspondent pas."),Object.keys(d).length>0)return void z(d);z({}),B(!0),D(null);try{if("signin"===e){let{error:a}=await b.auth.signInWithPassword({email:m,password:u});if(a)throw a;await c.replace("string"==typeof E?E:"/cv")}else{let{error:a}=await b.auth.signUp({email:m,password:u,options:{emailRedirectTo:"http://localhost:3000/api/auth/callback"}});if(a)throw a;D("Compte créé ! Vérifiez votre boîte mail pour confirmer votre adresse."),f("signin")}}catch(a){a instanceof Error?z({general:a.message}):z({general:"Une erreur inattendue est survenue. Réessayez plus tard."})}finally{B(!1)}},G=async()=>{if(!s(m))return void z({email:"Saisissez une adresse e-mail valide pour réinitialiser le mot de passe."});try{let{error:a}=await b.auth.resetPasswordForEmail(m,{redirectTo:"http://localhost:3000/reset-password"});if(a)throw a;D("Email de réinitialisation envoyé ! Consultez votre boîte de réception.")}catch(a){a instanceof Error&&z({general:a.message})}},H=()=>{f(a=>"signin"===a?"signup":"signin"),z({}),D(null)};return(0,g.jsxs)("div",{style:n,children:[(0,g.jsx)(j.default,{children:(0,g.jsx)("title",{children:"Connexion | Finance CV"})}),(0,g.jsxs)("div",{style:o,children:[(0,g.jsxs)("div",{style:{marginBottom:"24px",textAlign:"center"},children:[(0,g.jsx)(i.default,{href:"/",children:(0,g.jsx)("img",{src:"/Logo.png",alt:"Finance CV",style:{height:"120px",objectFit:"contain"}})}),(0,g.jsx)("h1",{style:{fontSize:"24px",marginTop:"8px",marginBottom:"8px",fontWeight:700},children:"signin"===e?"Connexion":"Créer un compte"}),(0,g.jsx)("p",{style:{color:"#94a3b8",fontSize:"14px"},children:"Accédez à votre générateur de CV personnalisé."})]}),(0,g.jsxs)("form",{onSubmit:F,noValidate:!0,children:[(0,g.jsx)("label",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",display:"block"},children:"Adresse e-mail"}),(0,g.jsx)("input",{style:p,value:m,onChange:a=>t(a.target.value),type:"email",placeholder:"prenom.nom@entreprise.com",autoComplete:"email"}),y.email&&(0,g.jsx)("p",{style:{color:"#f87171",fontSize:"13px",marginTop:"-12px",marginBottom:"12px"},children:y.email}),(0,g.jsx)("label",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",display:"block"},children:"Mot de passe"}),(0,g.jsx)("input",{style:p,value:u,onChange:a=>v(a.target.value),type:"password",placeholder:"Au moins 8 caractères",autoComplete:"signin"===e?"current-password":"new-password",minLength:8}),y.password&&(0,g.jsx)("p",{style:{color:"#f87171",fontSize:"13px",marginTop:"-12px",marginBottom:"12px"},children:y.password}),"signup"===e&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("label",{style:{fontSize:"13px",fontWeight:600,marginBottom:"6px",display:"block"},children:"Confirmer le mot de passe"}),(0,g.jsx)("input",{style:p,value:w,onChange:a=>x(a.target.value),type:"password",placeholder:"Retapez votre mot de passe",autoComplete:"new-password",minLength:8}),y.confirmPassword&&(0,g.jsx)("p",{style:{color:"#f87171",fontSize:"13px",marginTop:"-12px",marginBottom:"12px"},children:y.confirmPassword})]}),y.general&&(0,g.jsx)("p",{style:{color:"#f87171",fontSize:"13px",marginBottom:"12px"},children:y.general}),C&&(0,g.jsx)("p",{style:{color:"#34d399",fontSize:"13px",marginBottom:"12px"},children:C}),(0,g.jsx)("button",{type:"submit",style:q,disabled:A,children:A?"Patientez…":"signin"===e?"Se connecter":"Créer mon compte"})]}),"signin"===e&&(0,g.jsx)("button",{type:"button",style:r,onClick:G,children:"Mot de passe oublié ?"}),(0,g.jsx)("div",{style:{textAlign:"center",marginTop:"18px",fontSize:"14px",color:"#cbd5f5"},children:"signin"===e?(0,g.jsxs)(g.Fragment,{children:["Pas encore de compte ?"," ",(0,g.jsx)("button",{type:"button",onClick:H,style:{...r,width:"auto",display:"inline-block",marginTop:0},children:"S'inscrire gratuitement"})]}):(0,g.jsxs)(g.Fragment,{children:["Déjà membre ?"," ",(0,g.jsx)("button",{type:"button",onClick:H,style:{...r,width:"auto",display:"inline-block",marginTop:0},children:"Se connecter"})]})})]})]})}async function u(a){let b=(0,m.createPagesServerClient)(a),{data:{session:c}}=await b.auth.getSession();if(c?.user){let b=a.query.redirect;return{redirect:{destination:Array.isArray(b)?b[0]??"/cv":b??"/cv",permanent:!1}}}return{props:{initialSession:c}}}var v=a.i(4619),w=a.i(7987);let x=(0,d.hoist)(v,"default"),y=(0,d.hoist)(v,"getStaticProps"),z=(0,d.hoist)(v,"getStaticPaths"),A=(0,d.hoist)(v,"getServerSideProps"),B=(0,d.hoist)(v,"config"),C=(0,d.hoist)(v,"reportWebVitals"),D=(0,d.hoist)(v,"unstable_getStaticProps"),E=(0,d.hoist)(v,"unstable_getStaticPaths"),F=(0,d.hoist)(v,"unstable_getStaticParams"),G=(0,d.hoist)(v,"unstable_getServerProps"),H=(0,d.hoist)(v,"unstable_getServerSideProps"),I=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/login",pathname:"/login",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:v}),J=(0,w.getHandler)({srcPage:"/login",config:B,userland:v,routeModule:I,getStaticPaths:z,getStaticProps:y,getServerSideProps:A})}];

//# sourceMappingURL=ebde9_next_7612414a._.js.map